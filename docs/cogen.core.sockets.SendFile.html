<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">


<!-- remove old header -->


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>cogen API Reference Documentation
        - Class: SendFile</title><meta name="MSSmartTagsPreventParsing" content="true" /><meta http-equiv="imagetoolbar" content="no" /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/pygments.css" rel="stylesheet" type="text/css" />
    <!-- <link rel="shortcut icon" href="/images/favicon.ico" type="image/vnd.microsoft.icon"/> -->
    <link rel="stylesheet" href="css/apydia.css" type="text/css" />
    <script src="js/jquery-1.2.1.pack.js" type="text/javascript"></script>
    <script src="js/apydia.js" type="text/javascript"></script>
	<link rel="icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
    <div id="page">
        <div id="browser">
            <div class="browser-section">
                <h2>Module Index</h2>
                <ul>
                    <li>
                        <a href="cogen.html">cogen</a>
                    </li><li>
                        <a href="cogen.common.html">cogen.common</a>
                    </li><li>
                        <a href="cogen.core.html">cogen.core</a>
                    </li><li>
                        <a href="cogen.core.coroutines.html">cogen.core.coroutines</a>
                    </li><li>
                        <a href="cogen.core.events.html">cogen.core.events</a>
                    </li><li>
                        <a href="cogen.core.pubsub.html">cogen.core.pubsub</a>
                    </li><li>
                        <a href="cogen.core.queue.html">cogen.core.queue</a>
                    </li><li>
                        <a href="cogen.core.reactors.html">cogen.core.reactors</a>
                    </li><li>
                        <a href="cogen.core.schedulers.html">cogen.core.schedulers</a>
                    </li><li class="active">
                        <a href="cogen.core.sockets.html">cogen.core.sockets</a>
                    </li><li>
                        <a href="cogen.core.util.html">cogen.core.util</a>
                    </li><li>
                        <a href="cogen.web.html">cogen.web</a>
                    </li><li>
                        <a href="cogen.web.async.html">cogen.web.async</a>
                    </li><li>
                        <a href="cogen.web.wsgi.html">cogen.web.wsgi</a>
                    </li>
                </ul>
            </div>
            <div class="browser-section">
                <h2>cogen.core.sockets</h2>
                <ul>
                    <li>
                        <a href="cogen.core.sockets.Accept.html">Accept</a>
                    </li><li>
                        <a href="cogen.core.sockets.Connect.html">Connect</a>
                    </li><li>
                        <a href="cogen.core.sockets.Read.html">Read</a>
                    </li><li>
                        <a href="cogen.core.sockets.ReadAll.html">ReadAll</a>
                    </li><li>
                        <a href="cogen.core.sockets.ReadLine.html">ReadLine</a>
                    </li><li class="active">
                        <a href="cogen.core.sockets.SendFile.html">SendFile</a>
                    </li><li>
                        <a href="cogen.core.sockets.Socket.html">Socket</a>
                    </li><li>
                        <a href="cogen.core.sockets.SocketOperation.html">SocketOperation</a>
                    </li><li>
                        <a href="cogen.core.sockets.Write.html">Write</a>
                    </li><li>
                        <a href="cogen.core.sockets.WriteAll.html">WriteAll</a>
                    </li>
                </ul>
            </div>
            <div class="browser-section">
                <h2>Constructor</h2>
                <ul>
                    <li>
                        <a href="cogen.core.sockets.SendFile.html#constructor">__init__</a>
                    </li>
                </ul>
            </div>
            <div class="browser-section">
                <h2>Methods</h2>
                <ul>
                    <li>
                        <a href="cogen.web.async.ReadLine.html#method-cleanup">cleanup</a>
                    </li><li>
                        <a href="cogen.magic.sync.RunSync.html#method-finalize">finalize</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#method-iocp">iocp</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#method-iocp_done">iocp_done</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#method-iocp_send">iocp_send</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#method-pending">pending</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#method-process">process</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#method-run">run</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#method-send">send</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#method-try_run">try_run</a>
                    </li>
                </ul>
            </div>
            <div class="browser-section">
                <h2>Attributes</h2>
                <ul>
                    <li>
                        <a href="cogen.web.async.ReadLine.html#attribute-addr">addr</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#attribute-blocksize">blocksize</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-buff">buff</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#attribute-file_handle">file_handle</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-fileno">fileno</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-last_update">last_update</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-len">len</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#attribute-length">length</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#attribute-offset">offset</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#attribute-position">position</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-prio">prio</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-run_first">run_first</a>
                    </li><li>
                        <a href="cogen.core.sockets.SendFile.html#attribute-sent">sent</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-sock">sock</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-state">state</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-trim">trim</a>
                    </li><li>
                        <a href="cogen.web.async.ReadLine.html#attribute-weak_timeout">weak_timeout</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="content">
    <h1>Class: cogen.core.sockets.SendFile</h1>
    <div class="docstring rst"><p>Uses underling OS sendfile call or a regular memory copy operation if
there is no sendfile.
You can use this as a WriteAll if you specify the length.
Usage:</p>
<div class="source"><pre>yield sockets.SendFile(file_object, socket_object, 0, blocksize=0)
    # there will be only one send operation (if successfull)
    # that meas the whole file will be read in memory if there is
    #no sendfile

yield sockets.SendFile(file_object, socket_object, 0, file_size)
    # this will hang if we can't read file_size bytes
    #from the file
</pre></div>
</div>
    <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#294">View source</a>
    </li>
</ul>
    <div>
        <h2>Constructor</h2>
        <h3 id="constructor">
            __init__
            <span class="args">(self, file_handle, sock, offset=None, length=None, blocksize=4096, **kws)</span>
        </h3>
        <div class="docstring rst"></div>
        <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#319">View source</a>
    </li>
</ul>
    </div>
    <div>
        <h2>Methods</h2>
            <h3 id="method-cleanup">
                cleanup
                <span class="args">(self, sched, coro)</span>
            </h3>
            <div class="docstring rst"></div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#266">View source</a>
    </li>
</ul>
            <h3 id="method-finalize">
                finalize
                <span class="args">(self)</span>
            </h3>
            <div class="docstring rst"><p>Called just before the Coroutine wrapper passes the operation back
in the generator. Return value is the value actualy sent in the
generator. Subclasses might overwrite this method and call it from
the superclass.</p>
</div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/events.py#70">View source</a>
    </li>
</ul>
            <h3 id="method-iocp">
                iocp
                <span class="args">(self, overlap)</span>
            </h3>
            <div class="docstring rst"></div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#343">View source</a>
    </li>
</ul>
            <h3 id="method-iocp_done">
                iocp_done
                <span class="args">(self, rc, nbytes)</span>
            </h3>
            <div class="docstring rst"></div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#356">View source</a>
    </li>
</ul>
            <h3 id="method-iocp_send">
                iocp_send
                <span class="args">(self, offset, length, overlap)</span>
            </h3>
            <div class="docstring rst"></div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#339">View source</a>
    </li>
</ul>
            <h3 id="method-pending">
                pending
                <span class="args">(self)</span>
            </h3>
            <div class="docstring rst"></div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#264">View source</a>
    </li>
</ul>
            <h3 id="method-process">
                process
                <span class="args">(self, sched, coro)</span>
            </h3>
            <div class="docstring rst"><p>Add the operation in the reactor if necessary.</p>
</div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#250">View source</a>
    </li>
</ul>
            <h3 id="method-run">
                run
                <span class="args">(self, reactor)</span>
            </h3>
            <div class="docstring rst"></div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#359">View source</a>
    </li>
</ul>
            <h3 id="method-send">
                send
                <span class="args">(self, offset, length)</span>
            </h3>
            <div class="docstring rst"></div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#326">View source</a>
    </li>
</ul>
            <h3 id="method-try_run">
                try_run
                <span class="args">(self, reactor)</span>
            </h3>
            <div class="docstring rst"><p>This method will return a None value or raise a exception if the
operation can't complete at this time.</p>
<p>The socket poller will run this method if the socket is
readable/writeable.</p>
<p>If this returns a value that evaluates to False, the poller will try to
run this at a later time (when the socket is readable/writeable again).</p>
</div>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk/cogen/core/sockets.py#223">View source</a>
    </li>
</ul>
    </div>
    <div>
        <h2>Attributes</h2>
            <h3 id="attribute-addr">addr</h3>
            <div class="docstring rst"></div>
            <h4>Value of addr</h4>
            <pre class="code"><code>&lt;member 'addr' of 'SocketOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-blocksize">blocksize</h3>
            <div class="docstring rst"></div>
            <h4>Value of blocksize</h4>
            <pre class="code"><code>&lt;member 'blocksize' of 'SendFile' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-buff">buff</h3>
            <div class="docstring rst"></div>
            <h4>Value of buff</h4>
            <pre class="code"><code>&lt;member 'buff' of 'SocketOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-file_handle">file_handle</h3>
            <div class="docstring rst"></div>
            <h4>Value of file_handle</h4>
            <pre class="code"><code>&lt;member 'file_handle' of 'SendFile' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-fileno">fileno</h3>
            <div class="docstring rst"></div>
            <h4>Value of fileno</h4>
            <pre class="code"><code>&lt;member 'fileno' of 'SocketOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-last_update">last_update</h3>
            <div class="docstring rst"></div>
            <h4>Value of last_update</h4>
            <pre class="code"><code>&lt;member 'last_update' of 'SocketOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-len">len</h3>
            <div class="docstring rst"></div>
            <h4>Value of len</h4>
            <pre class="code"><code>&lt;member 'len' of 'SocketOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-length">length</h3>
            <div class="docstring rst"></div>
            <h4>Value of length</h4>
            <pre class="code"><code>&lt;member 'length' of 'SendFile' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-offset">offset</h3>
            <div class="docstring rst"></div>
            <h4>Value of offset</h4>
            <pre class="code"><code>&lt;member 'offset' of 'SendFile' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-position">position</h3>
            <div class="docstring rst"></div>
            <h4>Value of position</h4>
            <pre class="code"><code>&lt;member 'position' of 'SendFile' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-prio">prio</h3>
            <div class="docstring rst"></div>
            <h4>Value of prio</h4>
            <pre class="code"><code>&lt;member 'prio' of 'Operation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-run_first">run_first</h3>
            <div class="docstring rst"></div>
            <h4>Value of run_first</h4>
            <pre class="code"><code>&lt;member 'run_first' of 'SocketOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-sent">sent</h3>
            <div class="docstring rst"></div>
            <h4>Value of sent</h4>
            <pre class="code"><code>&lt;member 'sent' of 'SendFile' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-sock">sock</h3>
            <div class="docstring rst"></div>
            <h4>Value of sock</h4>
            <pre class="code"><code>&lt;member 'sock' of 'SocketOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-state">state</h3>
            <div class="docstring rst"></div>
            <h4>Value of state</h4>
            <pre class="code"><code>&lt;member 'state' of 'Operation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-trim">trim</h3>
            <div class="docstring rst"></div>
            <h4>Value of trim</h4>
            <pre class="code"><code>2000</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
            <h3 id="attribute-weak_timeout">weak_timeout</h3>
            <div class="docstring rst"></div>
            <h4>Value of weak_timeout</h4>
            <pre class="code"><code>&lt;member 'weak_timeout' of 'TimedOperation' objects&gt;</code></pre>
            <ul class="link-bar">
    <li class="link-to-sourcecode">
        <a href="http://code.google.com/p/cogen/source/browse/trunk#0">View source</a>
    </li>
</ul>
    </div>
        </div>
        <div id="footer">
            Generated with <a href="http://apydia.ematia.de/" class="extern">
            Apydia 0.0.3</a>
        </div>
    </div>
</body>
</html>